<div class="text-center">
    <h1 class="display-4">Вы можете настроить категорию под себя и создавать в ней задачи</h1>
</div>

<style>
    .table-hover tbody tr:hover .expand-icon {
        display: inline-block;
    }

    .expand-icon {
        display: none;
        float: right; /* Выравнивание справа */
        font-size: 18px; /* Размер стрелки */
        transition: transform 0.3s; /* Плавное изменение при наведении */
    }

    .expand-icon:hover {
        transform: rotate(90deg); /* Изменение угла поворота при наведении */
    }

    .expanded-input {
        display: none;
    }

    .expanded-input-visible {
        display: block;
    }
</style>


<!-- Модальное окно с категориями -->
<div id="myModal" style="max-width: 400px; width: 80%; border-radius: 10px; background-color: rgba(255, 255, 255, 0.95); padding: 20px; margin: 20px auto;">
    <div style="text-align: right;">
        <span onclick="document.getElementById('myModal').style.display='none'" style="color: #aaaaaa; font-size: 24px; cursor: pointer;">&times;</span>
    </div>
    <div style="margin-top: 20px;">
        <!-- Таблица с названиями всех категорий -->
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Название</th>
                </tr>
            </thead>
            <tbody>
               @foreach (var category in ViewBag.Categories)
               {
                   <tr>
                       <td>@category.Id</td>
                       <td>
                           <div>
                               @category.Name
                               <span class="expand-icon" onclick="toggleExpandedInput('@category.Id')">▶️</span>
                           </div>
                           <div id="expandedInput-@category.Id" class="expanded-input" style="display: none;">
                               <!-- Здесь можно добавить дополнительные элементы, такие как кнопки -->
                               <button>Кнопка 1</button>
                               <button>Кнопка 2</button>
                           </div>
                       </td>
                   </tr>
               }

            </tbody>
        </table>
    </div>
</div>

<!-- Кнопки "Создать категорию" и "Открыть категорию" -->
<div style="text-align: center; margin-top: 20px;">
    <a asp-controller="Category" asp-action="CreateCategory" class="btn btn-primary">Создать категорию</a>
    <button class="btn btn-primary" onclick="showOpenCategoryModal()">Открыть категорию</button>
</div>



<script>
    var expandedCategoryId = null; // Переменная для хранения ID раскрытой категории

    function toggleExpandedInput(categoryId) {
        if (expandedCategoryId && expandedCategoryId !== categoryId) {
            var previouslyExpanded = document.getElementById('expandedInput-' + expandedCategoryId);
            if (previouslyExpanded) {
                previouslyExpanded.style.display = 'none';
            }
        }

        var expandedInput = document.getElementById('expandedInput-' + categoryId);
        if (expandedInput) {
            if (expandedInput.style.display === 'none') {
                expandedInput.style.display = 'block';
                expandedCategoryId = categoryId; // Обновляем ID раскрытой категории
            } else {
                expandedInput.style.display = 'none';
                if (expandedCategoryId === categoryId) {
                    expandedCategoryId = null; // Очищаем переменную, если текущая категория свернута
                }
            }
        }
    }
</script>

<!-- Модальное окно для ввода ID категории -->
<div id="openCategoryModal" style="display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4);">
    <div style="background-color: #fefefe; margin: 10% auto; padding: 20px; border: 4px solid black; border-radius: 10px; width: 30%; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);">
        <span onclick="document.getElementById('openCategoryModal').style.display='none'" class="close" style="color: #aaaaaa; font-size: 28px; font-weight: bold; cursor: pointer; float: right;">&times;</span>
        <h2 style="text-align: center;">Введите ID категории</h2>
        <form id="openCategoryForm" asp-controller="Category" asp-action="GetCategoryForId" method="get">
            <div style="margin-bottom: 10px;">
                <input type="text" name="id" id="categoryInputId" class="form-control" style="width: 100%; padding: 5px; margin-bottom: 10px;">
                <button type="submit" class="btn btn-primary" style="width: 100%;">Открыть</button>
            </div>
        </form>
    </div>
</div>



<script>
// Функция для отображения модального окна ввода ID категории
function showOpenCategoryModal() {
    document.getElementById('openCategoryModal').style.display = 'block';
}

</script>




